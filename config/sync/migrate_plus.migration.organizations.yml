uuid: eafad32c-013f-4e5e-9532-ecf8597a40cc
langcode: en
status: true
dependencies: {  }
id: organizations
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: organizations
label: Organizations
source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls:
    - 'public://migrate/organizations.json'
  fields:
    -
      name: id
      label: ID
      selector: id
    -
      name: name
      label: Name
      selector: name
    -
      name: teaser
      label: 'Organization description summary'
      selector: teaser
    -
      name: website
      label: 'Organization website URL'
      selector: website
    -
      name: logo
      label: 'Organization logo'
      selector: logo
    -
      name: countries
      label: 'Organization countries'
      selector: countries
    -
      name: career
      label: 'Organization URL to career page'
      selector: career
  ids:
    id:
      type: string
  constants:
    DESTINATION_DIRECTORY: 'public://organization-images/'
process:
  type:
    plugin: default_value
    default_value: organization
  title: name
  field_website: website
  image_filename:
    plugin: callback
    callable: basename
    source: logo
  destination_path:
    plugin: concat
    source:
      - constants/DESTINATION_DIRECTORY
      - '@image_filename'
  field_logo/target_id:
    -
      plugin: download
      source:
        - logo
        - '@destination_path'
    -
      plugin: entity_generate
      value_key: uri
      entity_type: file
  field_logo/title: name
  field_teaser: teaser
  field_career: career
  field_countries:
    plugin: entity_generate
    source: countries
    value_key: name
    bundle: countries
    entity_type: taxonomy_term
  uid:
    plugin: default_value
    default_value: 1
destination:
  plugin: 'entity:node'
migration_dependencies: {  }
